<!DOCTYPE html>
<html>
<head>
    <title>Razorpay Payment</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>

<script>
    var options = {
        key: "{{ razorpay_key }}",
        amount: "{{ razorpay_order.amount }}",
        currency: "INR",
        name: "Rentify",
        description: "Vehicle Booking Payment",
        order_id: "{{ razorpay_order.id }}",

        handler: function (response) {
            var form = document.createElement('form');
            form.method = 'POST';
            form.action = "{% url 'bookings:payment_callback' %}";

            var payment_id = document.createElement('input');
            payment_id.type = 'hidden';
            payment_id.name = 'razorpay_payment_id';
            payment_id.value = response.razorpay_payment_id;

            var order_id = document.createElement('input');
            order_id.type = 'hidden';
            order_id.name = 'razorpay_order_id';
            order_id.value = response.razorpay_order_id;

            var signature = document.createElement('input');
            signature.type = 'hidden';
            signature.name = 'razorpay_signature';
            signature.value = response.razorpay_signature;

            form.appendChild(payment_id);
            form.appendChild(order_id);
            form.appendChild(signature);

            document.body.appendChild(form);
            form.submit();
        }
    };

    var rzp = new Razorpay(options);
    rzp.open();
</script>

</body>
</html>
